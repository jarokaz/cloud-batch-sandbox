Nov-26 01:13:22.195 [main] DEBUG nextflow.cli.Launcher - $> nextflow run main.nf
Nov-26 01:13:22.353 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 22.10.3
Nov-26 01:13:22.385 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/home/user/.nextflow/plugins; core-plugins: nf-amazon@1.11.1,nf-azure@0.14.2,nf-codecommit@0.1.2,nf-console@1.0.4,nf-ga4gh@1.0.4,nf-google@1.4.5,nf-tower@1.5.6,nf-wave@0.5.2
Nov-26 01:13:22.399 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Nov-26 01:13:22.400 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Nov-26 01:13:22.405 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.4.1 in 'deployment' mode
Nov-26 01:13:22.423 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Nov-26 01:13:22.453 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /home/user/cloud-batch-sandbox/alphafold/nextflow/nextflow.config
Nov-26 01:13:22.454 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /home/user/cloud-batch-sandbox/alphafold/nextflow/nextflow.config
Nov-26 01:13:22.488 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Nov-26 01:13:23.341 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 from script declararion
Nov-26 01:13:23.374 [main] INFO  nextflow.cli.CmdRun - Launching `main.nf` [special_brazil] DSL2 - revision: 3342872b18
Nov-26 01:13:23.376 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[nf-google@1.4.5]
Nov-26 01:13:23.376 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[nf-google@1.4.5]
Nov-26 01:13:23.376 [main] DEBUG nextflow.plugin.PluginUpdater - Installing plugin nf-google version: 1.4.5
Nov-26 01:13:23.402 [main] INFO  org.pf4j.AbstractPluginManager - Plugin 'nf-google@1.4.5' resolved
Nov-26 01:13:23.403 [main] INFO  org.pf4j.AbstractPluginManager - Start plugin 'nf-google@1.4.5'
Nov-26 01:13:23.456 [main] DEBUG nextflow.plugin.BasePlugin - Plugin started nf-google@1.4.5
Nov-26 01:13:23.472 [main] DEBUG nextflow.secret.LocalSecretsProvider - Secrets store: /home/user/.nextflow/secrets/store.json
Nov-26 01:13:23.477 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@20b9d5d5] - activable => nextflow.secret.LocalSecretsProvider@20b9d5d5
Nov-26 01:13:23.575 [main] DEBUG nextflow.Session - Session UUID: 379c8e23-57c2-42ac-81e3-c276c37f5cb4
Nov-26 01:13:23.575 [main] DEBUG nextflow.Session - Run name: special_brazil
Nov-26 01:13:23.575 [main] DEBUG nextflow.Session - Executor pool size: 8
Nov-26 01:13:23.851 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=24; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Nov-26 01:13:23.892 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 22.10.3 build 5834
  Created: 21-11-2022 21:37 UTC 
  System: Linux 5.15.65+
  Runtime: Groovy 3.0.13 on OpenJDK 64-Bit Server VM 17.0.5+8
  Encoding: UTF-8 (ANSI_X3.4-1968)
  Process: 3428@jk-af-dev-1 [172.17.0.3]
  CPUs: 8 - Mem: 31.4 GB (23.7 GB) - Swap: 0 (0)
Nov-26 01:13:23.928 [main] DEBUG nextflow.file.FileHelper - Can't check if specified path is NFS (1): gs://jk-aff-bucket/nextflow/alphafold

Nov-26 01:13:23.928 [main] DEBUG nextflow.Session - Work-dir: gs://jk-aff-bucket/nextflow/alphafold [null]
Nov-26 01:13:23.928 [main] DEBUG nextflow.Session - Script base path does not exist or is not a directory: /home/user/cloud-batch-sandbox/alphafold/nextflow/bin
Nov-26 01:13:23.966 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[GoogleLifeSciencesExecutor, GoogleBatchExecutor]
Nov-26 01:13:23.984 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Nov-26 01:13:24.014 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Nov-26 01:13:24.027 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 9; maxThreads: 1000
Nov-26 01:13:24.120 [main] DEBUG nextflow.Session - Session start
Nov-26 01:13:24.586 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Nov-26 01:13:24.757 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: google-batch
Nov-26 01:13:24.758 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'google-batch'
Nov-26 01:13:24.760 [main] DEBUG nextflow.executor.Executor - [warm up] executor > google-batch
Nov-26 01:13:24.767 [main] DEBUG n.processor.TaskPollingMonitor - Creating task monitor for executor 'google-batch' > capacity: 1000; pollInterval: 10s; dumpInterval: 5m 
Nov-26 01:13:24.775 [main] DEBUG nextflow.cloud.google.GoogleOpts - Google auth via application DEFAULT
Nov-26 01:13:24.777 [main] DEBUG n.c.google.batch.GoogleBatchExecutor - [GOOGLE BATCH] Executor config=BatchConfig[googleOpts=GoogleOpts(projectId:jk-af-final, credsFile:null, location:us-central1, enableRequesterPaysBuckets:false, credentials:UserCredentials{requestMetadata=null, temporaryAccess=null, clientId=764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com, refreshToken=1//04TeYasF5Wt-aCgYIARAAGAQSNwF-L9IreE6e7Xh_jRYGtCjynrOTKzDGN70ew8Df_WiLYv8Zalpi5DfqrUWhqfr4uQMrf5faWuE, tokenServerUri=https://oauth2.googleapis.com/token, transportFactoryClassName=com.google.auth.oauth2.OAuth2Utils$DefaultHttpTransportFactory, quotaProjectId=jk-af-final})
Nov-26 01:13:24.792 [main] DEBUG n.c.google.batch.client.BatchClient - [GOOGLE BATCH] Creating service client with config credentials
Nov-26 01:13:25.557 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: run_data_pipeline
Nov-26 01:13:25.558 [main] DEBUG nextflow.Session - Igniting dataflow network (2)
Nov-26 01:13:25.558 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > run_data_pipeline
Nov-26 01:13:25.560 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Nov-26 01:13:25.560 [main] DEBUG nextflow.Session - Session await
Nov-26 01:13:27.245 [Task submitter] DEBUG n.c.g.batch.GoogleBatchTaskHandler - [GOOGLE BATCH] submitted > job=nf-5b896cac-1669425206130; uid=j-105f01e7-864a-4949-8fec-0ebbacc4314b; work-dir=gs://jk-aff-bucket/nextflow/alphafold/5b/896cacf1632c69af3e3660eee3c561
Nov-26 01:13:27.246 [Task submitter] INFO  nextflow.Session - [5b/896cac] Submitted process > run_data_pipeline (1)
Nov-26 01:16:14.835 [Task monitor] DEBUG n.c.g.batch.GoogleBatchTaskHandler - [GOOGLE BATCH] Terminated job=nf-5b896cac-1669425206130; state=FAILED
Nov-26 01:16:15.828 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: run_data_pipeline (1); status: COMPLETED; exit: 1; error: -; workDir: gs://jk-aff-bucket/nextflow/alphafold/5b/896cacf1632c69af3e3660eee3c561]
Nov-26 01:16:15.974 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'run_data_pipeline (1)'

Caused by:
  Process `run_data_pipeline (1)` terminated with an error exit status (1)

Command executed:

  python /runners/run_test.py '--text=Bonjour --features_path=features.pkl --msas_path=msas'

Command exit status:
  1

Command output:
  (more omitted..)
  6008555da505: Verifying Checksum
  6008555da505: Download complete
  e2250e4b9e64: Verifying Checksum
  e2250e4b9e64: Download complete
  6133a7670aff: Verifying Checksum
  6133a7670aff: Download complete
  0047db6c2358: Verifying Checksum
  0047db6c2358: Download complete
  d9960804702f: Download complete
  be7a8828f4d2: Verifying Checksum
  be7a8828f4d2: Download complete
  320b8621e9d3: Download complete
  1b53decda963: Verifying Checksum
  1b53decda963: Download complete
  07414aeb81b6: Verifying Checksum
  07414aeb81b6: Download complete
  e2250e4b9e64: Pull complete
  9cf40c59065f: Pull complete
  5e609a938304: Pull complete
  f3f2f506d212: Pull complete
  b4ca963de55e: Pull complete
  83a0e5e3c82b: Pull complete
  07414aeb81b6: Pull complete
  3e45a0c08bfc: Pull complete
  6008555da505: Pull complete
  6133a7670aff: Pull complete
  0047db6c2358: Pull complete
  d9960804702f: Pull complete
  be7a8828f4d2: Pull complete
  320b8621e9d3: Pull complete
  1b53decda963: Pull complete
  Digest: sha256:9c70f5edda8241cbed45c5caf5196c24ae87614f6d65141d0f07f5a027249d4a
  Status: Downloaded newer image for gcr.io/jk-af-final/alphafold:latest
  gcr.io/jk-af-final/alphafold:latest
  /opt/conda/lib/python3.7/site-packages/haiku/_src/data_structures.py:37: FutureWarning: jax.tree_structure is deprecated, and will be removed in a future release. Use jax.tree_util.tree_structure instead.
    PyTreeDef = type(jax.tree_structure(None))
  I1126 01:16:01.802084 140658938681152 run_test.py:36] Running test
  I1126 01:16:01.802222 140658938681152 run_test.py:37] Bonjour --features_path=features.pkl --msas_path=msas
  I1126 01:16:01.802286 140658938681152 run_test.py:40] Saving features to None
  Bonjour --features_path=features.pkl --msas_path=msas
  Traceback (most recent call last):
    File "/runners/run_test.py", line 49, in <module>
      app.run(_main)
    File "/opt/conda/lib/python3.7/site-packages/absl/app.py", line 312, in run
      _run_main(main, args)
    File "/opt/conda/lib/python3.7/site-packages/absl/app.py", line 258, in _run_main
      sys.exit(main(argv))
    File "/runners/run_test.py", line 42, in _main
      with open(FLAGS.features_path, 'w') as f:
  TypeError: expected str, bytes or os.PathLike object, not NoneType

Command error:
  /opt/conda/lib/python3.7/site-packages/haiku/_src/data_structures.py:37: FutureWarning: jax.tree_structure is deprecated, and will be removed in a future release. Use jax.tree_util.tree_structure instead.
    PyTreeDef = type(jax.tree_structure(None))
  I1126 01:16:01.802084 140658938681152 run_test.py:36] Running test
  I1126 01:16:01.802222 140658938681152 run_test.py:37] Bonjour --features_path=features.pkl --msas_path=msas
  I1126 01:16:01.802286 140658938681152 run_test.py:40] Saving features to None
  Traceback (most recent call last):
    File "/runners/run_test.py", line 49, in <module>
      app.run(_main)
    File "/opt/conda/lib/python3.7/site-packages/absl/app.py", line 312, in run
      _run_main(main, args)
    File "/opt/conda/lib/python3.7/site-packages/absl/app.py", line 258, in _run_main
      sys.exit(main(argv))
    File "/runners/run_test.py", line 42, in _main
      with open(FLAGS.features_path, 'w') as f:
  TypeError: expected str, bytes or os.PathLike object, not NoneType

Work dir:
  gs://jk-aff-bucket/nextflow/alphafold/5b/896cacf1632c69af3e3660eee3c561

Tip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command line
Nov-26 01:16:15.985 [main] DEBUG nextflow.Session - Session await > all processes finished
Nov-26 01:16:16.016 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Process `run_data_pipeline (1)` terminated with an error exit status (1)
Nov-26 01:16:16.143 [main] DEBUG nextflow.Session - Session await > all barriers passed
Nov-26 01:16:16.221 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=0; succeedDuration=0ms; failedDuration=995ms; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=1; peakCpus=1; peakMemory=0; ]
Nov-26 01:16:16.232 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Nov-26 01:16:16.232 [main] INFO  org.pf4j.AbstractPluginManager - Stop plugin 'nf-google@1.4.5'
Nov-26 01:16:16.232 [main] DEBUG nextflow.plugin.BasePlugin - Plugin stopped nf-google
Nov-26 01:16:16.249 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
