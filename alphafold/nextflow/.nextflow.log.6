Nov-26 00:50:25.119 [main] DEBUG nextflow.cli.Launcher - $> nextflow run main.nf
Nov-26 00:50:25.235 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 22.10.3
Nov-26 00:50:25.260 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/home/user/.nextflow/plugins; core-plugins: nf-amazon@1.11.1,nf-azure@0.14.2,nf-codecommit@0.1.2,nf-console@1.0.4,nf-ga4gh@1.0.4,nf-google@1.4.5,nf-tower@1.5.6,nf-wave@0.5.2
Nov-26 00:50:25.272 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Nov-26 00:50:25.273 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Nov-26 00:50:25.277 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.4.1 in 'deployment' mode
Nov-26 00:50:25.293 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Nov-26 00:50:25.316 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /home/user/cloud-batch-sandbox/alphafold/nextflow/nextflow.config
Nov-26 00:50:25.317 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /home/user/cloud-batch-sandbox/alphafold/nextflow/nextflow.config
Nov-26 00:50:25.352 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Nov-26 00:50:26.185 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 from script declararion
Nov-26 00:50:26.241 [main] INFO  nextflow.cli.CmdRun - Launching `main.nf` [backstabbing_panini] DSL2 - revision: d6b4d36816
Nov-26 00:50:26.243 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[nf-google@1.4.5]
Nov-26 00:50:26.243 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[nf-google@1.4.5]
Nov-26 00:50:26.243 [main] DEBUG nextflow.plugin.PluginUpdater - Installing plugin nf-google version: 1.4.5
Nov-26 00:50:26.275 [main] INFO  org.pf4j.AbstractPluginManager - Plugin 'nf-google@1.4.5' resolved
Nov-26 00:50:26.276 [main] INFO  org.pf4j.AbstractPluginManager - Start plugin 'nf-google@1.4.5'
Nov-26 00:50:26.321 [main] DEBUG nextflow.plugin.BasePlugin - Plugin started nf-google@1.4.5
Nov-26 00:50:26.339 [main] DEBUG nextflow.secret.LocalSecretsProvider - Secrets store: /home/user/.nextflow/secrets/store.json
Nov-26 00:50:26.344 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@44cffc25] - activable => nextflow.secret.LocalSecretsProvider@44cffc25
Nov-26 00:50:26.457 [main] DEBUG nextflow.Session - Session UUID: 70a680f6-0f04-4bb6-bd9c-36ee89115d67
Nov-26 00:50:26.458 [main] DEBUG nextflow.Session - Run name: backstabbing_panini
Nov-26 00:50:26.459 [main] DEBUG nextflow.Session - Executor pool size: 8
Nov-26 00:50:26.735 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=24; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Nov-26 00:50:26.768 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 22.10.3 build 5834
  Created: 21-11-2022 21:37 UTC 
  System: Linux 5.15.65+
  Runtime: Groovy 3.0.13 on OpenJDK 64-Bit Server VM 17.0.5+8
  Encoding: UTF-8 (ANSI_X3.4-1968)
  Process: 2430@jk-af-dev-1 [172.17.0.3]
  CPUs: 8 - Mem: 31.4 GB (23.8 GB) - Swap: 0 (0)
Nov-26 00:50:26.804 [main] DEBUG nextflow.file.FileHelper - Can't check if specified path is NFS (1): gs://jk-aff-bucket/nextflow/alphafold

Nov-26 00:50:26.805 [main] DEBUG nextflow.Session - Work-dir: gs://jk-aff-bucket/nextflow/alphafold [null]
Nov-26 00:50:26.805 [main] DEBUG nextflow.Session - Script base path does not exist or is not a directory: /home/user/cloud-batch-sandbox/alphafold/nextflow/bin
Nov-26 00:50:26.836 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[GoogleLifeSciencesExecutor, GoogleBatchExecutor]
Nov-26 00:50:26.855 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Nov-26 00:50:26.890 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Nov-26 00:50:26.908 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 9; maxThreads: 1000
Nov-26 00:50:27.007 [main] DEBUG nextflow.Session - Session start
Nov-26 00:50:27.421 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Nov-26 00:50:27.581 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: google-batch
Nov-26 00:50:27.581 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'google-batch'
Nov-26 00:50:27.584 [main] DEBUG nextflow.executor.Executor - [warm up] executor > google-batch
Nov-26 00:50:27.593 [main] DEBUG n.processor.TaskPollingMonitor - Creating task monitor for executor 'google-batch' > capacity: 1000; pollInterval: 10s; dumpInterval: 5m 
Nov-26 00:50:27.601 [main] DEBUG nextflow.cloud.google.GoogleOpts - Google auth via application DEFAULT
Nov-26 00:50:27.604 [main] DEBUG n.c.google.batch.GoogleBatchExecutor - [GOOGLE BATCH] Executor config=BatchConfig[googleOpts=GoogleOpts(projectId:jk-af-final, credsFile:null, location:us-central1, enableRequesterPaysBuckets:false, credentials:UserCredentials{requestMetadata=null, temporaryAccess=null, clientId=764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com, refreshToken=1//04TeYasF5Wt-aCgYIARAAGAQSNwF-L9IreE6e7Xh_jRYGtCjynrOTKzDGN70ew8Df_WiLYv8Zalpi5DfqrUWhqfr4uQMrf5faWuE, tokenServerUri=https://oauth2.googleapis.com/token, transportFactoryClassName=com.google.auth.oauth2.OAuth2Utils$DefaultHttpTransportFactory, quotaProjectId=jk-af-final})
Nov-26 00:50:27.628 [main] DEBUG n.c.google.batch.client.BatchClient - [GOOGLE BATCH] Creating service client with config credentials
Nov-26 00:50:28.476 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: run_data_pipeline
Nov-26 00:50:28.477 [main] DEBUG nextflow.Session - Igniting dataflow network (2)
Nov-26 00:50:28.477 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > run_data_pipeline
Nov-26 00:50:28.479 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Nov-26 00:50:28.480 [main] DEBUG nextflow.Session - Session await
Nov-26 00:50:30.954 [Task submitter] DEBUG n.c.g.batch.GoogleBatchTaskHandler - [GOOGLE BATCH] submitted > job=nf-4fcbb564-1669423829387; uid=j-f2b69cc6-d2fa-4e22-8feb-617aeae3ee1a; work-dir=gs://jk-aff-bucket/nextflow/alphafold/4f/cbb564b083ec4d957d819d4fa9be22
Nov-26 00:50:30.955 [Task submitter] INFO  nextflow.Session - [4f/cbb564] Submitted process > run_data_pipeline (1)
Nov-26 00:53:17.664 [Task monitor] DEBUG n.c.g.batch.GoogleBatchTaskHandler - [GOOGLE BATCH] Terminated job=nf-4fcbb564-1669423829387; state=FAILED
Nov-26 00:53:18.912 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: run_data_pipeline (1); status: COMPLETED; exit: 1; error: -; workDir: gs://jk-aff-bucket/nextflow/alphafold/4f/cbb564b083ec4d957d819d4fa9be22]
Nov-26 00:53:19.019 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'run_data_pipeline (1)'

Caused by:
  Process `run_data_pipeline (1)` terminated with an error exit status (1)

Command executed:

  python /runners/run_test.py '--text=Bonjour' '--features_path=features.pkl --msas_path=msas'

Command exit status:
  1

Command output:
  (more omitted..)
  0f0ed9680ff1: Pull complete
  f3f2f506d212: Verifying Checksum
  f3f2f506d212: Download complete
  b4ca963de55e: Verifying Checksum
  b4ca963de55e: Download complete
  83a0e5e3c82b: Verifying Checksum
  83a0e5e3c82b: Download complete
  5e609a938304: Download complete
  3e45a0c08bfc: Verifying Checksum
  3e45a0c08bfc: Download complete
  6008555da505: Download complete
  e2250e4b9e64: Verifying Checksum
  e2250e4b9e64: Download complete
  0047db6c2358: Verifying Checksum
  0047db6c2358: Download complete
  d9960804702f: Verifying Checksum
  d9960804702f: Download complete
  be7a8828f4d2: Download complete
  e0943ab115e6: Verifying Checksum
  e0943ab115e6: Download complete
  30335c2213b5: Verifying Checksum
  30335c2213b5: Download complete
  6133a7670aff: Verifying Checksum
  6133a7670aff: Download complete
  07414aeb81b6: Verifying Checksum
  07414aeb81b6: Download complete
  e2250e4b9e64: Pull complete
  9cf40c59065f: Pull complete
  5e609a938304: Pull complete
  f3f2f506d212: Pull complete
  b4ca963de55e: Pull complete
  83a0e5e3c82b: Pull complete
  07414aeb81b6: Pull complete
  3e45a0c08bfc: Pull complete
  6008555da505: Pull complete
  6133a7670aff: Pull complete
  0047db6c2358: Pull complete
  d9960804702f: Pull complete
  be7a8828f4d2: Pull complete
  e0943ab115e6: Pull complete
  30335c2213b5: Pull complete
  Digest: sha256:f3601cc883e0fa81321824789e570f6f6259d48c5cf1ffcb19f8c7ff47657159
  Status: Downloaded newer image for gcr.io/jk-af-final/alphafold:latest
  gcr.io/jk-af-final/alphafold:latest
  /opt/conda/lib/python3.7/site-packages/haiku/_src/data_structures.py:37: FutureWarning: jax.tree_structure is deprecated, and will be removed in a future release. Use jax.tree_util.tree_structure instead.
    PyTreeDef = type(jax.tree_structure(None))
  Traceback (most recent call last):
    File "/runners/run_test.py", line 31, in <module>
      flags.DEFINE_strint('msas_path', None, 'A path to msas')
  AttributeError: module 'absl.flags' has no attribute 'DEFINE_strint'

Command error:
  /opt/conda/lib/python3.7/site-packages/haiku/_src/data_structures.py:37: FutureWarning: jax.tree_structure is deprecated, and will be removed in a future release. Use jax.tree_util.tree_structure instead.
    PyTreeDef = type(jax.tree_structure(None))
  Traceback (most recent call last):
    File "/runners/run_test.py", line 31, in <module>
      flags.DEFINE_strint('msas_path', None, 'A path to msas')
  AttributeError: module 'absl.flags' has no attribute 'DEFINE_strint'

Work dir:
  gs://jk-aff-bucket/nextflow/alphafold/4f/cbb564b083ec4d957d819d4fa9be22

Tip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command line
Nov-26 00:53:19.033 [main] DEBUG nextflow.Session - Session await > all processes finished
Nov-26 00:53:19.065 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Process `run_data_pipeline (1)` terminated with an error exit status (1)
Nov-26 00:53:19.211 [main] DEBUG nextflow.Session - Session await > all barriers passed
Nov-26 00:53:19.279 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=0; succeedDuration=0ms; failedDuration=1.3s; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=1; peakCpus=1; peakMemory=0; ]
Nov-26 00:53:19.292 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Nov-26 00:53:19.292 [main] INFO  org.pf4j.AbstractPluginManager - Stop plugin 'nf-google@1.4.5'
Nov-26 00:53:19.292 [main] DEBUG nextflow.plugin.BasePlugin - Plugin stopped nf-google
Nov-26 00:53:19.309 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
