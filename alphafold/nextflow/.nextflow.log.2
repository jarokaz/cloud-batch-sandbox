Nov-26 01:48:21.513 [main] DEBUG nextflow.cli.Launcher - $> nextflow run main.nf
Nov-26 01:48:21.643 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 22.10.3
Nov-26 01:48:21.675 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/home/user/.nextflow/plugins; core-plugins: nf-amazon@1.11.1,nf-azure@0.14.2,nf-codecommit@0.1.2,nf-console@1.0.4,nf-ga4gh@1.0.4,nf-google@1.4.5,nf-tower@1.5.6,nf-wave@0.5.2
Nov-26 01:48:21.687 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Nov-26 01:48:21.689 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Nov-26 01:48:21.693 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.4.1 in 'deployment' mode
Nov-26 01:48:21.706 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Nov-26 01:48:21.733 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /home/user/cloud-batch-sandbox/alphafold/nextflow/nextflow.config
Nov-26 01:48:21.735 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /home/user/cloud-batch-sandbox/alphafold/nextflow/nextflow.config
Nov-26 01:48:21.769 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Nov-26 01:48:22.622 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 from script declararion
Nov-26 01:48:22.667 [main] INFO  nextflow.cli.CmdRun - Launching `main.nf` [angry_booth] DSL2 - revision: bf36f65d3b
Nov-26 01:48:22.670 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[nf-google@1.4.5]
Nov-26 01:48:22.671 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[nf-google@1.4.5]
Nov-26 01:48:22.671 [main] DEBUG nextflow.plugin.PluginUpdater - Installing plugin nf-google version: 1.4.5
Nov-26 01:48:22.700 [main] INFO  org.pf4j.AbstractPluginManager - Plugin 'nf-google@1.4.5' resolved
Nov-26 01:48:22.700 [main] INFO  org.pf4j.AbstractPluginManager - Start plugin 'nf-google@1.4.5'
Nov-26 01:48:22.746 [main] DEBUG nextflow.plugin.BasePlugin - Plugin started nf-google@1.4.5
Nov-26 01:48:22.764 [main] DEBUG nextflow.secret.LocalSecretsProvider - Secrets store: /home/user/.nextflow/secrets/store.json
Nov-26 01:48:22.769 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@20b9d5d5] - activable => nextflow.secret.LocalSecretsProvider@20b9d5d5
Nov-26 01:48:22.866 [main] DEBUG nextflow.Session - Session UUID: 9a940242-33a9-49e4-af17-ed5a161af5b8
Nov-26 01:48:22.867 [main] DEBUG nextflow.Session - Run name: angry_booth
Nov-26 01:48:22.867 [main] DEBUG nextflow.Session - Executor pool size: 8
Nov-26 01:48:23.139 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=24; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Nov-26 01:48:23.179 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 22.10.3 build 5834
  Created: 21-11-2022 21:37 UTC 
  System: Linux 5.15.65+
  Runtime: Groovy 3.0.13 on OpenJDK 64-Bit Server VM 17.0.5+8
  Encoding: UTF-8 (ANSI_X3.4-1968)
  Process: 4591@jk-af-dev-1 [172.17.0.3]
  CPUs: 8 - Mem: 31.4 GB (23.7 GB) - Swap: 0 (0)
Nov-26 01:48:23.226 [main] DEBUG nextflow.file.FileHelper - Can't check if specified path is NFS (1): gs://jk-aff-bucket/nextflow/alphafold

Nov-26 01:48:23.227 [main] DEBUG nextflow.Session - Work-dir: gs://jk-aff-bucket/nextflow/alphafold [null]
Nov-26 01:48:23.228 [main] DEBUG nextflow.Session - Script base path does not exist or is not a directory: /home/user/cloud-batch-sandbox/alphafold/nextflow/bin
Nov-26 01:48:23.260 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[GoogleLifeSciencesExecutor, GoogleBatchExecutor]
Nov-26 01:48:23.273 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Nov-26 01:48:23.313 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Nov-26 01:48:23.325 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 9; maxThreads: 1000
Nov-26 01:48:23.418 [main] DEBUG nextflow.Session - Session start
Nov-26 01:48:23.871 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Nov-26 01:48:24.021 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: google-batch
Nov-26 01:48:24.021 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'google-batch'
Nov-26 01:48:24.023 [main] DEBUG nextflow.executor.Executor - [warm up] executor > google-batch
Nov-26 01:48:24.034 [main] DEBUG n.processor.TaskPollingMonitor - Creating task monitor for executor 'google-batch' > capacity: 1000; pollInterval: 10s; dumpInterval: 5m 
Nov-26 01:48:24.044 [main] DEBUG nextflow.cloud.google.GoogleOpts - Google auth via application DEFAULT
Nov-26 01:48:24.045 [main] DEBUG n.c.google.batch.GoogleBatchExecutor - [GOOGLE BATCH] Executor config=BatchConfig[googleOpts=GoogleOpts(projectId:jk-af-final, credsFile:null, location:us-central1, enableRequesterPaysBuckets:false, credentials:UserCredentials{requestMetadata=null, temporaryAccess=null, clientId=764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com, refreshToken=1//04TeYasF5Wt-aCgYIARAAGAQSNwF-L9IreE6e7Xh_jRYGtCjynrOTKzDGN70ew8Df_WiLYv8Zalpi5DfqrUWhqfr4uQMrf5faWuE, tokenServerUri=https://oauth2.googleapis.com/token, transportFactoryClassName=com.google.auth.oauth2.OAuth2Utils$DefaultHttpTransportFactory, quotaProjectId=jk-af-final})
Nov-26 01:48:24.062 [main] DEBUG n.c.google.batch.client.BatchClient - [GOOGLE BATCH] Creating service client with config credentials
Nov-26 01:48:24.782 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: run_data_pipeline
Nov-26 01:48:24.782 [main] DEBUG nextflow.Session - Igniting dataflow network (2)
Nov-26 01:48:24.783 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > run_data_pipeline
Nov-26 01:48:24.785 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Nov-26 01:48:24.786 [main] DEBUG nextflow.Session - Session await
Nov-26 01:48:26.375 [Task submitter] DEBUG n.c.g.batch.GoogleBatchTaskHandler - [GOOGLE BATCH] submitted > job=nf-f91b65d4-1669427305341; uid=j-48677560-3b95-496e-b34a-0e3b8aec61da; work-dir=gs://jk-aff-bucket/nextflow/alphafold/f9/1b65d41c135e6ef804d50b712900b7
Nov-26 01:48:26.376 [Task submitter] INFO  nextflow.Session - [f9/1b65d4] Submitted process > run_data_pipeline (1)
Nov-26 01:51:14.103 [Task monitor] DEBUG n.c.g.batch.GoogleBatchTaskHandler - [GOOGLE BATCH] Terminated job=nf-f91b65d4-1669427305341; state=FAILED
Nov-26 01:51:14.882 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: run_data_pipeline (1); status: COMPLETED; exit: 1; error: -; workDir: gs://jk-aff-bucket/nextflow/alphafold/f9/1b65d41c135e6ef804d50b712900b7]
Nov-26 01:51:15.016 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'run_data_pipeline (1)'

Caused by:
  Process `run_data_pipeline (1)` terminated with an error exit status (1)

Command executed:

  python /runners/run_test.py '--text=Bonjour' '--features_path=features.pkl' '--msas_path=msas'

Command exit status:
  1

Command output:
  (more omitted..)
  6008555da505: Download complete
  e2250e4b9e64: Verifying Checksum
  e2250e4b9e64: Download complete
  0047db6c2358: Verifying Checksum
  0047db6c2358: Download complete
  d9960804702f: Verifying Checksum
  d9960804702f: Download complete
  be7a8828f4d2: Verifying Checksum
  be7a8828f4d2: Download complete
  068c21d71a9f: Download complete
  d76dbecb5e4a: Verifying Checksum
  d76dbecb5e4a: Download complete
  6133a7670aff: Verifying Checksum
  6133a7670aff: Download complete
  07414aeb81b6: Verifying Checksum
  07414aeb81b6: Download complete
  e2250e4b9e64: Pull complete
  9cf40c59065f: Pull complete
  5e609a938304: Pull complete
  f3f2f506d212: Pull complete
  b4ca963de55e: Pull complete
  83a0e5e3c82b: Pull complete
  07414aeb81b6: Pull complete
  3e45a0c08bfc: Pull complete
  6008555da505: Pull complete
  6133a7670aff: Pull complete
  0047db6c2358: Pull complete
  d9960804702f: Pull complete
  be7a8828f4d2: Pull complete
  068c21d71a9f: Pull complete
  d76dbecb5e4a: Pull complete
  Digest: sha256:7deea843cbf3d9b643c2e0a1a8238047648b9550668454ee3fae41d0dcea7afa
  Status: Downloaded newer image for gcr.io/jk-af-final/alphafold:latest
  gcr.io/jk-af-final/alphafold:latest
  /opt/conda/lib/python3.7/site-packages/haiku/_src/data_structures.py:37: FutureWarning: jax.tree_structure is deprecated, and will be removed in a future release. Use jax.tree_util.tree_structure instead.
    PyTreeDef = type(jax.tree_structure(None))
  I1126 01:50:53.120862 140575471261504 run_test.py:36] Running test
  I1126 01:50:53.121001 140575471261504 run_test.py:37] Bonjour
  I1126 01:50:53.121070 140575471261504 run_test.py:40] Saving features to features.pkl
  Bonjour
  Traceback (most recent call last):
    File "/runners/run_test.py", line 51, in <module>
      app.run(_main)
    File "/opt/conda/lib/python3.7/site-packages/absl/app.py", line 312, in run
      _run_main(main, args)
    File "/opt/conda/lib/python3.7/site-packages/absl/app.py", line 258, in _run_main
      sys.exit(main(argv))
    File "/runners/run_test.py", line 47, in _main
      with open(os.path.join(FLAGS.msas_path, 'test.fasta')) as f:
  FileNotFoundError: [Errno 2] No such file or directory: 'msas/test.fasta'

Command error:
  /opt/conda/lib/python3.7/site-packages/haiku/_src/data_structures.py:37: FutureWarning: jax.tree_structure is deprecated, and will be removed in a future release. Use jax.tree_util.tree_structure instead.
    PyTreeDef = type(jax.tree_structure(None))
  I1126 01:50:53.120862 140575471261504 run_test.py:36] Running test
  I1126 01:50:53.121001 140575471261504 run_test.py:37] Bonjour
  I1126 01:50:53.121070 140575471261504 run_test.py:40] Saving features to features.pkl
  Traceback (most recent call last):
    File "/runners/run_test.py", line 51, in <module>
      app.run(_main)
    File "/opt/conda/lib/python3.7/site-packages/absl/app.py", line 312, in run
      _run_main(main, args)
    File "/opt/conda/lib/python3.7/site-packages/absl/app.py", line 258, in _run_main
      sys.exit(main(argv))
    File "/runners/run_test.py", line 47, in _main
      with open(os.path.join(FLAGS.msas_path, 'test.fasta')) as f:
  FileNotFoundError: [Errno 2] No such file or directory: 'msas/test.fasta'

Work dir:
  gs://jk-aff-bucket/nextflow/alphafold/f9/1b65d41c135e6ef804d50b712900b7

Tip: view the complete command output by changing to the process work dir and entering the command `cat .command.out`
Nov-26 01:51:15.027 [main] DEBUG nextflow.Session - Session await > all processes finished
Nov-26 01:51:15.057 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Process `run_data_pipeline (1)` terminated with an error exit status (1)
Nov-26 01:51:15.182 [main] DEBUG nextflow.Session - Session await > all barriers passed
Nov-26 01:51:15.252 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=0; succeedDuration=0ms; failedDuration=782ms; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=1; peakCpus=1; peakMemory=0; ]
Nov-26 01:51:15.263 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Nov-26 01:51:15.263 [main] INFO  org.pf4j.AbstractPluginManager - Stop plugin 'nf-google@1.4.5'
Nov-26 01:51:15.263 [main] DEBUG nextflow.plugin.BasePlugin - Plugin stopped nf-google
Nov-26 01:51:15.284 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
